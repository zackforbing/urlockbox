<% if current_user.nil? %>
  <h1><%= link_to "Log In", login_path %> or <%= link_to "Sign Up", new_user_path %></h1>
<% else %>
  <h6><%= "Logged in as #{current_user.email}" %> <%= link_to "Sign Out", logout_path, method: :delete %></h6>
  <%= form_for(:link, url: links_path) do |f| %>
    <%= f.label :title %>
    <%= f.text_field :title %>
    <%= f.label :url%>
    <%= f.text_field :url %>
    <%= f.submit "Add Link" %>
  <% end %>
  <table id='link-table'>
    <tr>
      <th>Title</th>
      <th>URL</th>
      <th>Read?</th>
      <th>Edit</th>
    </tr>
    <% @links.each do |link| %>
      <tr id="<%= link.id %>">
        <td class="editable-title" contenteditable='true'><%= link.title %></td>
        <td class="editable-url" contenteditable='true'><%= link_to link.url, link.url %></td>
        <% if link.read %>
          <td class="read-btn"><%= button_to "Mark as Unread", toggle_read_path(link), method: :put %></td>
        <% else %>
          <td class="read-btn"><%= button_to "Mark as Read", toggle_read_path(link), method: :put %></td>
        <% end %>
        <td class="edit-link-btn"><%= button_to "Edit Link", edit_link_path(link), method: :get %>
      </tr>
    <% end %>
  </table>
<% end %>
